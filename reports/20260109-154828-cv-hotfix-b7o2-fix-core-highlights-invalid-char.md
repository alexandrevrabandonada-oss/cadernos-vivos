# CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828
- Root: C:\Projetos\Cadernos Vivos\cadernos-vivos
- File: src\components\v2\Cv2CoreHighlights.tsx

## DIAG

- Lines: 117

`"
  for (=84;  -le 105; ++) {
    if ( -ge 1 -and  -le import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }.Count) {
       = import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }[-1]
      AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  ((

- Suspects: none (still might be hidden char)

## PATCH 1 — Restore do backup (se existir)

- backup atual: tools\_patch_backup\20260109-154828\Cv2CoreHighlights.tsx.before-restore.bak
[OK] restored from: tools\_patch_backup\20260109-153323\Cv2CoreHighlights.tsx

## PATCH 2 — Sanitize + injecao segura data-cv2

[WARN] nao achei padrao return(<TAG ...>) para injetar data-cv2.
[OK] arquivo regravado em UTF8 sem BOM

## VERIFY

[RUN] npm run lint
`"
  AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  `"
  for (=84;  -le 105; ++) {
    if ( -ge 1 -and  -le import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }.Count) {
       = import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }[-1]
      AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  ((  - Suspects: none (still might be hidden char)  ## PATCH 1 — Restore do backup (se existir)  - backup atual: tools\_patch_backup\20260109-154828\Cv2CoreHighlights.tsx.before-restore.bak [OK] restored from: tools\_patch_backup\20260109-153323\Cv2CoreHighlights.tsx  ## PATCH 2 — Sanitize + injecao segura data-cv2  [WARN] nao achei padrao return(<TAG ...>) para injetar data-cv2. [OK] arquivo regravado em UTF8 sem BOM  ## VERIFY  [RUN] npm run lint > cadernos-vivos@0.1.0 lint
> eslint --ignore-pattern tools/_patch_backup/**
  AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  `"
  for (=84;  -le 105; ++) {
    if ( -ge 1 -and  -le import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }.Count) {
       = import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }[-1]
      AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  ((  - Suspects: none (still might be hidden char)  ## PATCH 1 — Restore do backup (se existir)  - backup atual: tools\_patch_backup\20260109-154828\Cv2CoreHighlights.tsx.before-restore.bak [OK] restored from: tools\_patch_backup\20260109-153323\Cv2CoreHighlights.tsx  ## PATCH 2 — Sanitize + injecao segura data-cv2  [WARN] nao achei padrao return(<TAG ...>) para injetar data-cv2. [OK] arquivo regravado em UTF8 sem BOM  ## VERIFY  [RUN] npm run lint 

[RUN] npm run build
`"
  AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  `"
  for (=84;  -le 105; ++) {
    if ( -ge 1 -and  -le import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }.Count) {
       = import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }[-1]
      AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  ((  - Suspects: none (still might be hidden char)  ## PATCH 1 — Restore do backup (se existir)  - backup atual: tools\_patch_backup\20260109-154828\Cv2CoreHighlights.tsx.before-restore.bak [OK] restored from: tools\_patch_backup\20260109-153323\Cv2CoreHighlights.tsx  ## PATCH 2 — Sanitize + injecao segura data-cv2  [WARN] nao achei padrao return(<TAG ...>) para injetar data-cv2. [OK] arquivo regravado em UTF8 sem BOM  ## VERIFY  [RUN] npm run lint `"
  AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  `"
  for (=84;  -le 105; ++) {
    if ( -ge 1 -and  -le import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }.Count) {
       = import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }[-1]
      AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  ((  - Suspects: none (still might be hidden char)  ## PATCH 1 — Restore do backup (se existir)  - backup atual: tools\_patch_backup\20260109-154828\Cv2CoreHighlights.tsx.before-restore.bak [OK] restored from: tools\_patch_backup\20260109-153323\Cv2CoreHighlights.tsx  ## PATCH 2 — Sanitize + injecao segura data-cv2  [WARN] nao achei padrao return(<TAG ...>) para injetar data-cv2. [OK] arquivo regravado em UTF8 sem BOM  ## VERIFY  [RUN] npm run lint > cadernos-vivos@0.1.0 lint
> eslint --ignore-pattern tools/_patch_backup/**
  AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  `"
  for (=84;  -le 105; ++) {
    if ( -ge 1 -and  -le import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }.Count) {
       = import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }[-1]
      AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  ((  - Suspects: none (still might be hidden char)  ## PATCH 1 — Restore do backup (se existir)  - backup atual: tools\_patch_backup\20260109-154828\Cv2CoreHighlights.tsx.before-restore.bak [OK] restored from: tools\_patch_backup\20260109-153323\Cv2CoreHighlights.tsx  ## PATCH 2 — Sanitize + injecao segura data-cv2  [WARN] nao achei padrao return(<TAG ...>) para injetar data-cv2. [OK] arquivo regravado em UTF8 sem BOM  ## VERIFY  [RUN] npm run lint   [RUN] npm run build > cadernos-vivos@0.1.0 build
> next build

Ôû▓ Next.js 16.1.1 (Turbopack)

  Creating an optimized production build ...
Ô£ô Compiled successfully in 2.8s
  Running TypeScript ...
  Collecting page data using 11 workers ...
  Generating static pages using 11 workers (0/5) ...
  Generating static pages using 11 workers (1/5) 
  Generating static pages using 11 workers (2/5) 
  Generating static pages using 11 workers (3/5) 
Ô£ô Generating static pages using 11 workers (5/5) in 169.4ms
  Finalizing page optimization ...

Route (app)
Ôöî Ôùï /
Ôö£ Ôùï /_not-found
Ôö£ Ôùï /c
Ôö£ ãÆ /c/[slug]
Ôö£ ãÆ /c/[slug]/a/[aula]
Ôö£ ãÆ /c/[slug]/acervo
Ôö£ ãÆ /c/[slug]/debate
Ôö£ ãÆ /c/[slug]/mapa
Ôö£ ãÆ /c/[slug]/pratica
Ôö£ ãÆ /c/[slug]/quiz
Ôö£ ãÆ /c/[slug]/registro
Ôö£ ãÆ /c/[slug]/status
Ôö£ ãÆ /c/[slug]/trilha
Ôö£ ãÆ /c/[slug]/v2
Ôö£ ãÆ /c/[slug]/v2/debate
Ôö£ ãÆ /c/[slug]/v2/linha
Ôö£ ãÆ /c/[slug]/v2/linha-do-tempo
Ôö£ ãÆ /c/[slug]/v2/mapa
Ôö£ ãÆ /c/[slug]/v2/provas
Ôö£ ãÆ /c/[slug]/v2/trilhas
Ôöö ãÆ /c/[slug]/v2/trilhas/[id]


Ôùï  (Static)   prerendered as static content
ãÆ  (Dynamic)  server-rendered on demand
  AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  `"
  for (=84;  -le 105; ++) {
    if ( -ge 1 -and  -le import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }.Count) {
       = import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }[-1]
      AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  ((  - Suspects: none (still might be hidden char)  ## PATCH 1 — Restore do backup (se existir)  - backup atual: tools\_patch_backup\20260109-154828\Cv2CoreHighlights.tsx.before-restore.bak [OK] restored from: tools\_patch_backup\20260109-153323\Cv2CoreHighlights.tsx  ## PATCH 2 — Sanitize + injecao segura data-cv2  [WARN] nao achei padrao return(<TAG ...>) para injetar data-cv2. [OK] arquivo regravado em UTF8 sem BOM  ## VERIFY  [RUN] npm run lint `"
  AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  `"
  for (=84;  -le 105; ++) {
    if ( -ge 1 -and  -le import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }.Count) {
       = import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }[-1]
      AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  ((  - Suspects: none (still might be hidden char)  ## PATCH 1 — Restore do backup (se existir)  - backup atual: tools\_patch_backup\20260109-154828\Cv2CoreHighlights.tsx.before-restore.bak [OK] restored from: tools\_patch_backup\20260109-153323\Cv2CoreHighlights.tsx  ## PATCH 2 — Sanitize + injecao segura data-cv2  [WARN] nao achei padrao return(<TAG ...>) para injetar data-cv2. [OK] arquivo regravado em UTF8 sem BOM  ## VERIFY  [RUN] npm run lint > cadernos-vivos@0.1.0 lint
> eslint --ignore-pattern tools/_patch_backup/**
  AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  `"
  for (=84;  -le 105; ++) {
    if ( -ge 1 -and  -le import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }.Count) {
       = import Link from "next/link";  type CoreCard = {   id: string;   label: string;   href: string;   hint?: string; };  function isRecord(v: unknown): v is Record<string, unknown> {   return !!v && typeof v === "object" && !Array.isArray(v); }  function asStr(v: unknown): string | null {   return typeof v === "string" ? v : null; }  function pickStr(o: Record<string, unknown>, keys: string[]): string | null {   for (const k of keys) {     const s = asStr(o[k]);     if (s && s.trim()) return s.trim();   }   return null; }  function routeFromId(idRaw: string): string {   const id = idRaw.toLowerCase().trim();   const map: Record<string, string> = {     hub: "",     mapa: "mapa",     map: "mapa",     linha: "linha",     line: "linha",     provas: "provas",     evidencias: "provas",     trilhas: "trilhas",     trilha: "trilhas",     debate: "debate",     tempo: "linha-do-tempo",     "linha-do-tempo": "linha-do-tempo",     timeline: "linha-do-tempo",   };   return map[id] ?? id; }  function normalizeCoreCards(meta: unknown, slug: string): CoreCard[] {   const m = isRecord(meta) ? meta : {};   const raw = m["coreNodes"];   const list: unknown[] = Array.isArray(raw) ? raw : [];    const out: CoreCard[] = [];   for (const it of list) {     if (typeof it === "string") {       const id = it;       const seg = routeFromId(id);       const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;       out.push({ id, label: id, href });       continue;     }     if (!isRecord(it)) continue;     const id = pickStr(it, ["id","key","door","slug","name","title","label"]) ?? "node";     const label = pickStr(it, ["label","title","name"]) ?? id;     const hint = pickStr(it, ["hint","summary","desc","description","oneLiner"]) ?? undefined;     const seg = routeFromId(pickStr(it, ["door","key","id","slug"]) ?? id);     const href = seg ? `/c/${slug}/v2/${seg}` : `/c/${slug}/v2`;     out.push({ id, label, href, hint });   }    if (out.length === 0) {     const base: Array<{id: string; label: string; seg: string}> = [       { id: "mapa", label: "Mapa", seg: "mapa" },       { id: "linha", label: "Linha", seg: "linha" },       { id: "provas", label: "Provas", seg: "provas" },       { id: "debate", label: "Debate", seg: "debate" },       { id: "trilhas", label: "Trilhas", seg: "trilhas" },       { id: "tempo", label: "Linha do tempo", seg: "linha-do-tempo" },     ];     for (const b of base) out.push({ id: b.id, label: b.label, href: `/c/${slug}/v2/${b.seg}` });   }    const seen = new Set<string>();   const uniq: CoreCard[] = [];   for (const c of out) {     if (seen.has(c.href)) continue;     seen.add(c.href);     uniq.push(c);   }   return uniq.slice(0, 9); }  export function Cv2CoreHighlights(props: { slug: string; meta?: unknown; current?: string }) {   const cards = normalizeCoreCards(props.meta, props.slug);   const current = (props.current ?? "").toLowerCase().trim();   return (     <section\ className="cv2-core-highlights"\ data-cv2-core-highlights="1"\ data-cv2="core-highlights">       <div className="cv2-core-highlights__head">         <div className="cv2-core-highlights__title">Destaques do Núcleo</div>         <div className="cv2-core-highlights__sub">Portas principais do universo — escolha uma rota.</div>       </div>       <div className="cv2-core-highlights__grid">         {cards.map((c) => {           const idNorm = routeFromId(c.id);           const active = idNorm === current || c.id.toLowerCase() === current;           return (             <Link key={c.href} href={c.href} className={"cv2-core-highlights__card" + (active ? " is-active" : "")}>               <div className="cv2-core-highlights__left">                 <div className="cv2-core-highlights__label">{c.label}</div>                 {c.hint ? <div className="cv2-core-highlights__hint">{c.hint}</div> : null}               </div>               <div className="cv2-core-highlights__go">Entrar</div>             </Link>           );         })}       </div>     </section>   ); }[-1]
      AddLine # CV HOTFIX B7O2 — Fix Invalid character em Cv2CoreHighlights — 20260109-154828 - Root: C:\Projetos\Cadernos Vivos\cadernos-vivos - File: src\components\v2\Cv2CoreHighlights.tsx  ## DIAG  - Lines: 117  ((  - Suspects: none (still might be hidden char)  ## PATCH 1 — Restore do backup (se existir)  - backup atual: tools\_patch_backup\20260109-154828\Cv2CoreHighlights.tsx.before-restore.bak [OK] restored from: tools\_patch_backup\20260109-153323\Cv2CoreHighlights.tsx  ## PATCH 2 — Sanitize + injecao segura data-cv2  [WARN] nao achei padrao return(<TAG ...>) para injetar data-cv2. [OK] arquivo regravado em UTF8 sem BOM  ## VERIFY  [RUN] npm run lint   [RUN] npm run build 

[OK] verify ok