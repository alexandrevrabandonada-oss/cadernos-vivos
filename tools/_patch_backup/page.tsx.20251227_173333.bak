import Link from "next/link";
import type { CSSProperties } from "react";
import { listCadernos } from "@/lib/cadernos";

type AccentStyle = CSSProperties & { ["--accent"]?: string };

export default async function Page() {
  const items = await listCadernos();
  return (
    <main className="space-y-5">
      <div className="card p-5">
        <div className="text-xs muted">VR Abandonada</div>
        <h1 className="text-3xl font-semibold mt-1">Cadernos Vivos</h1>
        <p className="muted mt-2">Conhecimento vivo: perguntas boas, prática leve e debate com cuidado. Sem tribunal.</p>
        <p className="text-sm mt-3 muted">Eixo: bem comum • autogestão • ajuda mútua • trabalho digno • controle social.</p>
      </div>

      <div className="grid gap-3">
        {items.map((c) => {
          const s: AccentStyle = { ["--accent"]: c.accent };
          return (
            <Link key={c.slug} href={"/c/" + c.slug} className="card p-4 hover:bg-white/10 transition" style={s}>
              <div className="flex items-start justify-between gap-3">
                <div className="min-w-0">
                  <div className="text-xs muted">{c.slug}</div>
                  <div className="text-lg font-semibold mt-1">{c.title}</div>
                  {c.subtitle ? <div className="muted mt-1">{c.subtitle}</div> : null}
                </div>
                <div className="enso" aria-hidden="true" />
              </div>
            </Link>
          );
        })}
      </div>

      <div className="text-xs muted">v0.1g • urbano-zen</div>
    </main>
  );
}
