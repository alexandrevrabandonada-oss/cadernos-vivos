import { notFound } from "next/navigation";
import V2Nav from "@/components/v2/V2Nav";
import { ProvasV2 } from "@/components/v2/ProvasV2";
import { loadCadernoV2 } from "@/lib/v2";

export default async function Page({ params }: { params: Promise<{ slug: string }> }) {
  const { slug } = await params;
  const data = await loadCadernoV2(slug);
  if (!data) return notFound();

  const anyData = data as unknown as Record<string, unknown>;
  const title0 = (typeof anyData.title === "string" && anyData.title) ? (anyData.title as string) : slug;
  const mapa = anyData.mapa ? anyData.mapa : anyData.data;
  const provas = (anyData.provas ? anyData.provas : (mapa && typeof mapa === "object" ? (mapa as Record<string, unknown>).provas : undefined));

  return (
    <main className="min-h-screen">
      <V2Nav slug={slug} active="provas" />
      <ProvasV2 slug={slug} title={title0} provas={provas} mapa={mapa} />
    </main>
  );
}