import type { CSSProperties } from "react";
import Link from "next/link";
import { getCaderno } from "@/lib/cadernos";
import { CadernoHeader } from "@/components/CadernoHeader";
import NavPills from "@/components/NavPills";
type AccentStyle = CSSProperties & { ["--accent"]?: string };
export default async function Page({ params }: { params: Promise<{ slug: string }> }) {
  const { slug } = await params;
  const data = await getCaderno(slug);
  const s: AccentStyle = { ["--accent"]: data.meta.accent };
  const base = "/cadernos/" + slug + "/acervo/";
  return (
    <main className="space-y-5" style={s}>
      <CadernoHeader title={data.meta.title} subtitle={data.meta.subtitle} ethos={data.meta.ethos} />
      <NavPills slug={slug} />
      <div className="card p-5">
        <h2 className="text-xl font-semibold">Acervo</h2>
        <p className="muted mt-2">Materiais brutos do pacote (PDF/DOC). Isso é base de estudo, não tribunal.</p>
      </div>
      <div className="card p-5">
        <div className="grid gap-3">
          {(data.acervo || []).map((it, idx) => (
            <div key={idx} className="card p-4">
              <div className="text-xs muted">{it.kind}{it.tags?.length ? " • " + it.tags.join(", ") : ""}</div>
              <div className="font-semibold mt-1">{it.title}</div>
              {it.file ? (
                <Link className="inline-block mt-3 card px-3 py-2 hover:bg-white/10 transition" href={base + it.file} target="_blank">
                  <span className="accent">Abrir arquivo</span>
                </Link>
              ) : <div className="muted mt-3">Sem arquivo importado ainda.</div>}
            </div>
          ))}
        </div>
      </div>
    </main>
  );
}